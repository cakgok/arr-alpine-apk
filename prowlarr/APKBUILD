pkgname=prowlarr
pkgver=2.0.5.5160
pkgrel=0
pkgdesc="Indexer manager/proxy (pre-built musl binary)"
url="https://prowlarr.com/"
architectures="x86_64 aarch64"
license="GPL-3.0-or-later"
depends="icu-libs ca-certificates tzdata"
options="!check"
case "$CARCH" in
  x86_64) _arch="x64" ;;
  aarch64) _arch="arm64" ;;
  *) echo "Unsupported arch: $CARCH" && return 1 ;;
esac
source="prowlarr-$pkgver-musl.tar.gz::https://github.com/Prowlarr/Prowlarr/releases/download/v${pkgver}/Prowlarr.master.${pkgver}.linux-musl-core-${_arch}.tar.gz"
builddir="$srcdir"

build() { :; }

package() {
  install -d "$pkgdir/usr/lib/$pkgname"
  tar -xzf "$srcdir"/Prowlarr.master.$pkgver.linux-musl-core-$_arch.tar.gz \
      -C "$pkgdir/usr/lib/$pkgname" --strip-components=1
  install -Dm755 /dev/null "$pkgdir/usr/bin/$pkgname"
  cat > "$pkgdir/usr/bin/$pkgname" <<EOF
#!/usr/bin/env sh
exec /usr/lib/$pkgname/Prowlarr "\$@"
EOF
}

sha512sums="
4bbf51fc1bdf08c9904cb9979ba667cbe7612fe641d401923a7910ae600f6ffa43ca6555117ce0d46dc8fc8a86113fb5ef0d25e03abe268958a7034571ae3f69  prowlarr-2.0.5.5160-musl.tar.gz
"
